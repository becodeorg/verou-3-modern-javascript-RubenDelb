(()=>{"use strict";const e="c2a8355a1f5b4c7f1f722fb4ec6e7c0f",t="4avo3C4_Jw1jULeK83Tn4kuRkut5O7TCKE_ZXBRgMGc";function r(e){let t=Math.floor(e.wind_deg);switch(!0){case t>=360&&t<=21:t="N";break;case t>=22&&t<=44:t="NNE";break;case t>=45&&t<=66:t="NE";break;case t>=67&&t<=89:t="ENE";break;case t>=90&&t<=111:t="E";break;case t>=112&&t<=134:t="ESE";break;case t>=135&&t<=156:t="SE";break;case t>=157&&t<=179:t="SSE";break;case t>=180&&t<=201:t="S";break;case t>=202&&t<=224:t="SSW";break;case t>=225&&t<=246:t="SW";break;case t>=247&&t<=269:t="WSW";break;case t>=270&&t<=291:t="W";break;case t>=292&&t<=314:t="WNW";break;case t>=315&&t<=336:t="NW";break;case t>=337&&t<=359:t="NNW";break;default:t="no data"}return t}const n=(e,t,r)=>{const n=document.createElement(e);return n.classList=t,r.appendChild(n),n};let a,o,s=null;const i=e=>{null!=e&&e.destroy()},c=e=>Math.ceil(Math.cbrt(Math.pow(e/.836,2))),d=e=>{const t=[];for(let r=0;r<24;r++){const n=e.hourly[r].dt+e.timezone_offset,a=new Date(1e3*n).getHours()+"h";t.push(a)}return t},l=(e,t)=>{void 0!==e?t.push(e["1h"]):t.push(0)},u=document.getElementById("currentWeatherWrapper"),h=document.getElementById("carouselInner"),m=e=>{document.getElementsByClassName("charts")[0].style.display="block",console.log(e),(e=>{const t=document.getElementById("currentWeatherWrapper"),r=e.current,a=n("div","currentWeatherCard",t),o=n("div","currentTitleDiv",a),s=n("div","currentInfoDiv",a);n("h3","currentTitle",o).innerHTML="Current Weather";const i=n("p","currentHour",o);let c=r.dt+e.timezone_offset;i.innerHTML="at "+(new Date(1e3*c).getHours()-1)+"h",n("img","iconCurrent",s).src="http://openweathermap.org/img/wn/"+r.weather[0].icon+"@2x.png";const d=n("div","currentTemperatureDiv",s);n("h1","temperatureCurrent",d).innerHTML=Math.round(r.temp)+"째C",n("h6","feelTemperatureCurrent",d).innerHTML="feels like: "+Math.round(r.feels_like)+"째C";const l=n("div","currentWindDiv",s),u=n("img","currentWindIcon",l);u.src="/images/up-arrow-svgrepo-com.svg",u.style.transform="rotate3d(0, 0, 1, "+r.wind_deg+"deg)",n("h5","currentWindSpeed",l).innerHTML=Math.round(3.6*r.wind_speed)+" km/h"})(e),(e=>{for(let t=0;t<e.daily.length;t++){const a=document.getElementById("carouselInner"),o=document.createElement("div");e.daily[t]==e.daily[0]?o.classList.add("card","carousel-item","active"):o.classList.add("card","carousel-item"),a.appendChild(o);const s=n("h3","displayDay",o);let i=e.daily[t].dt+e.timezone_offset;s.innerHTML=new Date(1e3*i).toDateString();const c=n("div","weatherImgDiv",o),d=n("div","weatherInfoDiv",o);n("img","weatherIcon",c).src="http://openweathermap.org/img/wn/"+e.daily[t].weather[0].icon+"@2x.png";const l=n("div","windDiv",c),u=n("img","windIcon",l);u.src="/images/up-arrow-svgrepo-com.svg",u.style.transform="rotate3d(0, 0, 1, "+e.daily[t].wind_deg+"deg)";const h=n("div","windDescriptionDiv",l);n("h5","windSpeed",h).innerHTML=Math.round(3.6*e.daily[t].wind_speed)+" km/h";const m=r(e.daily[t]);n("p","windDirection",h).innerHTML=m;const p=n("div","temperatureDiv",d);n("p","weatherDescription",d).innerHTML=e.daily[t].weather[0].description,n("p","tempMax",p).innerHTML="Max: "+Math.round(e.daily[t].temp.max)+"째C",n("p","tempMin",p).innerHTML="Min: "+Math.round(e.daily[t].temp.min)+"째C"}})(e),(e=>{i(a);const t=d(e);let r=[],n=[];for(let t=0;t<24;t++){const a=e.hourly[t].temp,o=e.hourly[t].feels_like;r.push(a),n.push(o)}const o={type:"line",data:{labels:t,datasets:[{label:"Actual Temperature",borderColor:"rgb(255, 99, 132)",data:r},{label:"Feels-like Temperature",data:n,borderColor:"rgb(44, 116, 150)"}]},options:{scales:{y:{beginAtZero:!1}}}};a=new Chart(document.getElementById("myFirstChart"),o)})(e),(e=>{i(o);const t=d(e);let r=[],n=[];for(let t=0;t<24;t++){const a=c(e.hourly[t].wind_speed),o=c(e.hourly[t].wind_gust);r.push(a),n.push(o)}const a={type:"line",data:{labels:t,datasets:[{label:"Windspeed in bft",data:r,borderColor:"rgb(255, 99, 132)"},{label:"Windgusts in bft",data:n,borderColor:"rgb(44, 116, 150)"}]},options:{scales:{y:{beginAtZero:!1}}}};o=new Chart(document.getElementById("mySecondChart"),a)})(e),(e=>{i(s);const t=d(e);let r=[],n=[];for(let t=0;t<24;t++)l(e.hourly[t].rain,r),l(e.hourly[t].snow,n);const a={type:"bar",data:{labels:t,datasets:[{label:"Rain in mm",backgroundColor:"rgb(49, 135, 216)",borderColor:"rgb(255, 99, 132)",data:r},{label:"Snow in mm",backgroundColor:"rgb(168, 194, 219)",borderColor:"rgb(255, 99, 132)",data:n}]},options:{scales:{y:{beginAtZero:!0}}}};s=new Chart(document.getElementById("myRainChart"),a)})(e)},p=()=>{document.getElementsByClassName("charts")[0].style.display="none",h.innerHTML="",u.innerHTML="",setTimeout((()=>{alert("This location does not exist in our database")}),500)};document.getElementById("submitBtn").addEventListener("click",(()=>{let r=document.getElementById("searchBar").value.toLowerCase();h.innerHTML="",u.innerHTML="",fetch("https://api.openweathermap.org/data/2.5/forecast?q="+r+"&appid="+e).then((e=>e.json())).then((n=>{const a=n.city.coord.lat,o=n.city.coord.lon;fetch("https://api.openweathermap.org/data/2.5/onecall?lat="+a+"&lon="+o+"&exclude=minutely&units=metric&appid="+e).then((e=>e.json())).then(m).then((e=>{fetch("https://api.unsplash.com/search/photos?query="+e+"&client_id="+t).then((e=>e.json())).then((e=>{console.log(e);const t=Math.round(Math.random()*e.results.length);document.body.style.backgroundImage="url("+e.results[t].urls.regular+")"}))})(r))})).catch(p)}))})();